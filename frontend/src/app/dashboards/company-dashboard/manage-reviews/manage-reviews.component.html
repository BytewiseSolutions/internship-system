<div class="reviews-container">
    <h2>Manage Reviews</h2>

    <div *ngIf="loading" class="loading">Loading reviews...</div>

    <div *ngIf="error" class="error">{{ error }}</div>

    <div *ngIf="!loading && reviews.length === 0" class="empty-state">
        <p>No reviews found</p>
        <p class="subtext">Reviews from students will appear here once they submit feedback</p>
    </div>

    <div class="review-list" *ngIf="!loading && reviews.length > 0">
        <div class="review-card" *ngFor="let review of reviews">
            <h3>{{ review.internship_title }}</h3>

            <p>
                <strong>Rating:</strong>
                <span class="rating-display">
                    <span class="rating-stars">
                        <span *ngFor="let star of getStars(review.rating)" class="star"
                            [class.filled]="star <= review.rating" [class.empty]="star > review.rating">
                            ‚≠ê
                        </span>
                    </span>
                    <span class="rating-text">{{ review.rating }} / 5</span>
                </span>
            </p>

            <div class="review-comment">
                <strong>Comment:</strong> {{ review.comment }}
            </div>

            <p><strong>Submitted by:</strong> {{ review.student_name }}</p>

            <p><strong>Date:</strong> {{ review.created_at | date:'medium' }}</p>

            <div class="reply-section">
                <label>Reply to this review:</label>
                <textarea [(ngModel)]="companyReply[review.id]" rows="3"
                    placeholder="Type your response to this review...">
                </textarea>
                <button (click)="submitReply(review.id)" [disabled]="isReplyEmpty(review.id)">
                    Submit Reply
                </button>
            </div>

            <div *ngIf="review.employer_reply" class="employer-reply">
                <strong>Your Reply:</strong> {{ review.employer_reply }}
            </div>
        </div>
    </div>
</div>