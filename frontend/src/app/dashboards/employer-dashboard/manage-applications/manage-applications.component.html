<div class="system-admin-dashboard" [class.sidebar-collapsed]="isSidebarCollapsed">
    <app-employer-sidebar (collapsedChange)="onSidebarCollapseChanged($event)"></app-employer-sidebar>

    <main class="main-content">
        <app-employer-header [isSidebarCollapsed]="isSidebarCollapsed"></app-employer-header>

        <div class="dashboard-content">
            <div class="page-header">
                <h1>Manage Applications</h1>
            </div>

            <div class="applications-table">
                <div *ngIf="loading" class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading applications...</p>
                </div>
                
                <div *ngIf="!loading && applications.length === 0" class="empty-state">
                    <i class="fas fa-inbox"></i>
                    <h3>No Applications Yet</h3>
                    <p>Applications for your internships will appear here.</p>
                </div>
                
                <table *ngIf="!loading && applications.length > 0">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Internship</th>
                            <th>Applied Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let application of applications">
                            <td>{{ application.student_name }}</td>
                            <td>{{ application.internship_title }}</td>
                            <td>{{ application.applied_at | date }}</td>
                            <td>
                                <span class="status" [class]="application.status.toLowerCase()">
                                    {{ application.status }}
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-info" (click)="viewDocuments(application)">
                                        <i class="fas fa-eye"></i> View Docs
                                    </button>
                                    <button class="btn btn-sm btn-success" 
                                            *ngIf="application.status === 'PENDING'"
                                            (click)="updateStatus(application.application_id, 'ACCEPTED')">
                                        Accept
                                    </button>
                                    <button class="btn btn-sm btn-danger" 
                                            *ngIf="application.status === 'PENDING'"
                                            (click)="updateStatus(application.application_id, 'REJECTED')">
                                        Reject
                                    </button>
                                    <span *ngIf="application.status !== 'PENDING'" class="text-muted">
                                        {{ application.status }}
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>