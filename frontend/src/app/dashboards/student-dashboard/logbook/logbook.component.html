<div class="logbook-page">
    <div class="page-header">
        <h1><i class="fas fa-book"></i> Weekly Logbook</h1>
        <p>Record your weekly internship activities and progress</p>
    </div>

    <div class="logbook-form-container">
        <div class="form-card">
            <h2>Submit Weekly Report</h2>
            <form (ngSubmit)="submitLogbook()" #logbookFormRef="ngForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="week_number">Week Number</label>
                        <input type="number" id="week_number" [(ngModel)]="logbookForm.week_number" 
                               name="week_number" required min="1">
                    </div>
                    <div class="form-group">
                        <label for="week_ending">Week Ending Date</label>
                        <input type="date" id="week_ending" [(ngModel)]="logbookForm.week_ending" 
                               name="week_ending" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="activities_completed">Activities Completed This Week</label>
                    <textarea id="activities_completed" [(ngModel)]="logbookForm.activities_completed" 
                              name="activities_completed" required rows="4"
                              placeholder="Describe the tasks and activities you completed this week..."></textarea>
                </div>

                <div class="form-group">
                    <label for="skills_learned">Skills Learned</label>
                    <textarea id="skills_learned" [(ngModel)]="logbookForm.skills_learned" 
                              name="skills_learned" required rows="4"
                              placeholder="What new skills or knowledge did you acquire?"></textarea>
                </div>

                <div class="form-group">
                    <label for="challenges_faced">Challenges Faced</label>
                    <textarea id="challenges_faced" [(ngModel)]="logbookForm.challenges_faced" 
                              name="challenges_faced" required rows="4"
                              placeholder="Describe any difficulties or obstacles you encountered..."></textarea>
                </div>

                <button type="submit" class="submit-btn" [disabled]="!logbookFormRef.form.valid || submitting">
                    <i class="fas fa-paper-plane"></i>
                    {{ submitting ? 'Submitting...' : 'Submit Weekly Report' }}
                </button>
            </form>
        </div>
    </div>

    <div class="my-logbooks">
        <h2>My Previous Entries</h2>
        
        <div class="logbooks-grid" *ngIf="!loading && myLogbooks.length > 0">
            <div class="logbook-entry" *ngFor="let entry of myLogbooks">
                <div class="entry-header">
                    <span class="week-badge">Week {{ entry.week_number }}</span>
                    <span class="date">{{ entry.week_ending | date }}</span>
                </div>
                
                <div class="entry-content">
                    <div class="section">
                        <h4>Activities</h4>
                        <p>{{ entry.activities_completed }}</p>
                    </div>
                    
                    <div class="section">
                        <h4>Skills</h4>
                        <p>{{ entry.skills_learned }}</p>
                    </div>
                    
                    <div class="section">
                        <h4>Challenges</h4>
                        <p>{{ entry.challenges_faced }}</p>
                    </div>
                    
                    <div class="section feedback" *ngIf="entry.supervisor_feedback">
                        <h4>Supervisor Feedback</h4>
                        <p>{{ entry.supervisor_feedback }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="no-entries" *ngIf="!loading && myLogbooks.length === 0">
            <i class="fas fa-book-open"></i>
            <h3>No entries yet</h3>
            <p>Start by submitting your first weekly report above.</p>
        </div>

        <div class="loading" *ngIf="loading">
            <i class="fas fa-spinner fa-spin"></i> Loading your entries...
        </div>
    </div>
</div>