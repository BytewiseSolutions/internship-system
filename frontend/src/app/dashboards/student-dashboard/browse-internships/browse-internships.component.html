<div class="browse-internships">
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <h1 class="page-title">Browse Internships</h1>
            <p class="page-subtitle">Discover amazing internship opportunities tailored for you</p>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" [(ngModel)]="searchTerm" (input)="filterInternships()"
                    placeholder="Search internships by title, company, or location..." class="search-input">
            </div>

            <div class="filter-grid">
                <div class="filter-group">
                    <label class="filter-label">Posted From</label>
                    <input type="date" [(ngModel)]="filterPostedFrom" (change)="filterInternships()"
                        class="filter-input">
                </div>

                <div class="filter-group">
                    <label class="filter-label">Posted To</label>
                    <input type="date" [(ngModel)]="filterPostedTo" (change)="filterInternships()" class="filter-input">
                </div>

                <div class="filter-group">
                    <label class="filter-label">Status</label>
                    <select [(ngModel)]="filterStatus" (change)="filterInternships()" class="filter-select">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="Inactive">Inactive</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Results Count -->
        <div class="results-info" *ngIf="filteredInternships.length > 0">
            <span class="results-count">{{ filteredInternships.length }} internship{{ filteredInternships.length !== 1 ?
                's' : '' }} found</span>
        </div>

        <!-- Internships Grid -->
        <div class="internship-grid" *ngIf="filteredInternships.length > 0; else noResults">
            <div *ngFor="let internship of paginatedInternships" class="internship-card">
                <div class="card-header">
                    <h3 class="internship-title">{{ internship.title }}</h3>
                    <span class="company-badge">{{ internship.company_name }}</span>
                </div>

                <div class="card-content">
                    <div class="info-row">
                        <i class="fas fa-map-marker-alt"></i>
                        <span class="info-text">{{ internship.location }}</span>
                    </div>

                    <div class="info-row">
                        <i class="fas fa-calendar-plus"></i>
                        <span class="info-text">Posted: {{ internship.postedDate | date:'mediumDate' }}</span>
                    </div>

                    <div class="info-row">
                        <i class="fas fa-clock"></i>
                        <span class="info-text deadline">Deadline: {{ internship.deadline | date:'mediumDate' }}</span>
                    </div>

                    <p class="internship-description">{{ internship.description }}</p>
                </div>

                <div class="card-actions">
                    <button class="apply-btn" [class.applied]="appliedInternshipIds.includes(internship.id)"
                        [class.pending]="appliedInternshipIds.includes(internship.id)"
                        [disabled]="appliedInternshipIds.includes(internship.id)" (click)="openApplyModal(internship)">
                        <i class="fas" [class.fa-check]="appliedInternshipIds.includes(internship.id)"
                            [class.fa-paper-plane]="!appliedInternshipIds.includes(internship.id)"></i>
                        {{ appliedInternshipIds.includes(internship.id) ? 'Application Sent' : 'Apply Now' }}
                    </button>
                </div>
            </div>
        </div>

        <!-- No Results -->
        <ng-template #noResults>
            <div class="no-results">
                <i class="fas fa-briefcase"></i>
                <h3>No internships found</h3>
                <p>Try adjusting your search filters or check back later for new opportunities.</p>
            </div>
        </ng-template>

        <!-- Pagination -->
        <div class="pagination-section" *ngIf="totalPages > 1">
            <div class="pagination">
                <button class="pagination-btn prev" (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>

                <div class="page-info">
                    <span class="page-text">Page {{ currentPage }} of {{ totalPages }}</span>
                </div>

                <button class="pagination-btn next" (click)="goToPage(currentPage + 1)"
                    [disabled]="currentPage === totalPages">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Apply Modal -->
        <div class="modal-backdrop" *ngIf="showApplyModal" (click)="closeApplyModal()">
            <div class="modal-container" (click)="$event.stopPropagation()">
                <div class="modal-header">
                    <h3>Apply for {{ selectedInternship?.title }}</h3>
                    <button class="close-btn" (click)="closeApplyModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="modal-body">
                    <form (submit)="submitApplication()" class="application-form">
                        <div class="form-group">
                            <label class="file-label">
                                <i class="fas fa-file-pdf"></i>
                                Upload CV (PDF)
                                <span class="required">*</span>
                            </label>
                            <input type="file" (change)="onFileSelected($event, 'cv')" accept=".pdf" class="file-input">
                            <small class="file-hint">Maximum file size: 5MB</small>
                        </div>

                        <div class="form-group">
                            <label class="file-label">
                                <i class="fas fa-file-alt"></i>
                                Upload Transcript (PDF)
                            </label>
                            <input type="file" (change)="onFileSelected($event, 'transcript')" accept=".pdf"
                                class="file-input">
                            <small class="file-hint">Optional - Maximum file size: 5MB</small>
                        </div>

                        <div class="form-group">
                            <label class="file-label">
                                <i class="fas fa-envelope"></i>
                                Upload Application Letter (PDF)
                            </label>
                            <input type="file" (change)="onFileSelected($event, 'letter')" accept=".pdf"
                                class="file-input">
                            <small class="file-hint">Optional - Maximum file size: 5MB</small>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" (click)="closeApplyModal()">
                                Cancel
                            </button>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                Submit Application
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>