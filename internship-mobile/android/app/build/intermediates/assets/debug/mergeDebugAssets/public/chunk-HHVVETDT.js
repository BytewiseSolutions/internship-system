import{a as Z}from"./chunk-ZI2MEB23.js";import{a as G,k as J,u as K,v as Q,y as X,z as Y}from"./chunk-OSMB4DQJ.js";import{$ as k,A as C,B as x,L as b,R as v,V as w,W as I,X as y,ca as T,da as F,ea as V,fa as D,g,ga as N,h as _,ha as W,i as l,j as h,k as E,ka as B,l as S,m as M,ma as L,n as e,na as U,o as n,oa as j,p as s,q as O,r as d,s as c,ta as z,ua as H,v as o,va as A,w as p,ya as R,z as P,za as q}from"./chunk-6NGTZMOM.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function $(u,m){if(u&1){let a=O();e(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o(3,"Edit Profile"),n(),e(4,"ion-buttons",15)(5,"ion-button",16),d("click",function(){g(a);let i=c();return _(i.closeEditModal())}),s(6,"ion-icon",17),n()()()(),e(7,"ion-content")(8,"div",18)(9,"ion-item")(10,"ion-input",19),x("ngModelChange",function(i){g(a);let t=c();return C(t.editForm.name,i)||(t.editForm.name=i),_(i)}),n()(),e(11,"ion-item")(12,"ion-input",20),x("ngModelChange",function(i){g(a);let t=c();return C(t.editForm.email,i)||(t.editForm.email=i),_(i)}),n()(),e(13,"div",21)(14,"ion-button",22),d("click",function(){g(a);let i=c();return _(i.saveProfile())}),o(15," Save Changes "),n(),e(16,"ion-button",23),d("click",function(){g(a);let i=c();return _(i.closeEditModal())}),o(17," Cancel "),n()()()()}if(u&2){let a=c();l(10),P("ngModel",a.editForm.name),l(2),P("ngModel",a.editForm.email)}}var ce=(()=>{let m=class m{constructor(r,i){this.router=r,this.authService=i,this.user={},this.isEditModalOpen=!1,this.editForm={name:"",email:""},this.showToast=!1,this.toastMessage="",this.toastColor="success",G({personOutline:X,mailOutline:Q,schoolOutline:Y,logOutOutline:K,closeOutline:J})}ngOnInit(){this.user=this.authService.getCurrentUser()||{}}openEditModal(){this.editForm.name=this.user.name||"",this.editForm.email=this.user.email||"",this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}saveProfile(){if(!this.editForm.name.trim()||!this.editForm.email.trim()){this.showToastMessage("Please fill in all fields","warning");return}let r=this.authService.getCurrentUser();if(!r?.id){this.showToastMessage("User not found","danger");return}let i={user_id:r.id,name:this.editForm.name,email:this.editForm.email};this.authService.updateProfile(i).subscribe({next:t=>{t.success?(this.user.name=this.editForm.name,this.user.email=this.editForm.email,this.showToastMessage("Profile updated successfully!","success"),this.closeEditModal()):this.showToastMessage(t.message||"Failed to update profile","danger")},error:t=>{console.error("Error updating profile:",t),this.showToastMessage("Network error. Please try again.","danger")}})}showToastMessage(r,i){this.toastMessage=r,this.toastColor=i,this.showToast=!0}logout(){this.authService.logout(),this.router.navigate(["/landing"])}};m.\u0275fac=function(i){return new(i||m)(h(v),h(Z))},m.\u0275cmp=E({type:m,selectors:[["app-profile"]],decls:55,vars:11,consts:[["color","primary"],[1,"profile-content"],[1,"profile-header"],[1,"avatar"],["name","person-outline"],[1,"profile-details"],["name","person-outline","slot","start"],["name","mail-outline","slot","start"],["name","school-outline","slot","start"],[1,"profile-actions"],["expand","block","fill","outline","color","primary",3,"click"],["expand","block","fill","solid","color","danger",3,"click"],["name","log-out-outline","slot","start"],[3,"didDismiss","isOpen"],[3,"didDismiss","isOpen","message","duration","color"],["slot","end"],[3,"click"],["name","close-outline"],[1,"modal-content",2,"padding","1rem"],["label","Full Name *","label-placement","stacked","placeholder","Enter your full name",3,"ngModelChange","ngModel"],["label","Email *","label-placement","stacked","type","email","placeholder","Enter your email",3,"ngModelChange","ngModel"],[2,"margin-top","2rem"],["expand","block","color","primary",3,"click"],["expand","block","fill","outline",3,"click"]],template:function(i,t){i&1&&(e(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o(3,"Profile"),n()()(),e(4,"ion-content",1)(5,"div",2)(6,"div",3),s(7,"ion-icon",4),n(),e(8,"h2"),o(9),n(),e(10,"p"),o(11),n()(),e(12,"div",5)(13,"ion-card")(14,"ion-card-header")(15,"ion-card-title"),o(16,"Personal Information"),n()(),e(17,"ion-card-content")(18,"ion-item"),s(19,"ion-icon",6),e(20,"ion-label")(21,"h3"),o(22,"Full Name"),n(),e(23,"p"),o(24),n()()(),e(25,"ion-item"),s(26,"ion-icon",7),e(27,"ion-label")(28,"h3"),o(29,"Email"),n(),e(30,"p"),o(31),n()()(),e(32,"ion-item"),s(33,"ion-icon",8),e(34,"ion-label")(35,"h3"),o(36,"School"),n(),e(37,"p"),o(38),n()()(),e(39,"ion-item"),s(40,"ion-icon",8),e(41,"ion-label")(42,"h3"),o(43,"Course"),n(),e(44,"p"),o(45),n()()()()()(),e(46,"div",9)(47,"ion-button",10),d("click",function(){return t.openEditModal()}),o(48," Edit Profile "),n(),e(49,"ion-button",11),d("click",function(){return t.logout()}),s(50,"ion-icon",12),o(51," Logout "),n()(),e(52,"ion-modal",13),d("didDismiss",function(){return t.closeEditModal()}),S(53,$,18,2,"ng-template"),n(),e(54,"ion-toast",14),d("didDismiss",function(){return t.showToast=!1}),n()()),i&2&&(l(9),p(t.user.name||"Student"),l(2),p(t.user.email||"student@example.com"),l(13),p(t.user.name||"Not provided"),l(7),p(t.user.email||"Not provided"),l(7),p(t.user.school_name||"Not provided"),l(7),p(t.user.course_name||"Not provided"),l(7),M("isOpen",t.isEditModalOpen),l(2),M("isOpen",t.showToast)("message",t.toastMessage)("duration",3e3)("color",t.toastColor))},dependencies:[b,y,w,I,B,L,A,z,V,D,N,W,T,R,U,j,k,F,q,H],styles:[".profile-content[_ngcontent-%COMP%]{--background: #f5f5f5}.profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e7d32,#1b5e20);color:#fff;text-align:center;padding:2rem 1rem}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:#fff3;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.profile-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;margin:0}.profile-details[_ngcontent-%COMP%]{padding:1rem}.profile-details[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0}.profile-details[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.profile-details[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2e7d32;margin-right:1rem}.profile-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#333;margin:0}.profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:.25rem 0 0}.profile-actions[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem}.profile-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;font-weight:600}"]});let u=m;return u})();export{ce as ProfilePage};
