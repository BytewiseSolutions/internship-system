import{a as B}from"./chunk-WVNCIOPZ.js";import{a as V}from"./chunk-ZI2MEB23.js";import{E as R,a as j,j as z,w as D}from"./chunk-OSMB4DQJ.js";import{D as O,F as P,H as b,I as y,J as M,L as N,ba as k,ea as E,fa as T,g as p,h as _,i as s,j as m,k as u,ka as w,l,m as f,ma as L,n as e,o as a,p as g,q as h,r as v,s as C,ta as F,u as x,v as c,va as A,w as I,x as S,ya as U}from"./chunk-6NGTZMOM.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function $(t,n){t&1&&(e(0,"div",5)(1,"p"),c(2,"Loading notifications..."),a()())}function H(t,n){t&1&&(e(0,"div",6),g(1,"ion-icon",7),e(2,"h3"),c(3,"No notifications"),a(),e(4,"p"),c(5,"You're all caught up!"),a()())}function q(t,n){t&1&&(e(0,"ion-badge",0),c(1,"New"),a())}function G(t,n){if(t&1){let d=h();e(0,"ion-card",8),v("click",function(){let i=p(d).$implicit,r=C();return _(r.markAsRead(i))}),e(1,"ion-card-content")(2,"div",9),l(3,q,2,0,"ion-badge",10),e(4,"span",11),g(5,"ion-icon",12),c(6),O(7,"date"),a()(),e(8,"p",13),c(9),a()()()}if(t&2){let d=n.$implicit;x("unread",!d.is_read),s(3),f("ngIf",!d.is_read),s(3),S(" ",P(7,5,d.created_at,"short")," "),s(3),I(d.message)}}var ei=(()=>{let n=class n{constructor(o,i){this.authService=o,this.notificationService=i,this.notifications=[],this.isLoading=!0,j({notificationsOutline:D,checkmarkCircleOutline:z,timeOutline:R})}ngOnInit(){this.loadNotifications()}loadNotifications(){let o=this.authService.getCurrentUser();o?.id?this.notificationService.getUserNotifications(o.id).subscribe({next:i=>{this.notifications=i.success?i.notifications:[];let r=this.notifications.filter(Y=>!Y.is_read).length;this.notificationService.updateUnreadCount(r),this.isLoading=!1},error:i=>{console.error("Error loading notifications:",i),this.notifications=[],this.isLoading=!1}}):this.isLoading=!1}markAsRead(o){o.is_read||this.notificationService.markAsRead(o.notification_id).subscribe({next:i=>{i.success&&(o.is_read=!0,this.notificationService.decrementUnreadCount())},error:i=>{console.error("Error marking notification as read:",i)}})}};n.\u0275fac=function(i){return new(i||n)(m(V),m(B))},n.\u0275cmp=u({type:n,selectors:[["app-notifications"]],decls:9,vars:3,consts:[["color","primary"],[1,"notifications-content"],["class","loading-message",4,"ngIf"],["class","no-notifications",4,"ngIf"],["class","notification-card",3,"unread","click",4,"ngFor","ngForOf"],[1,"loading-message"],[1,"no-notifications"],["name","notifications-outline",1,"empty-icon"],[1,"notification-card",3,"click"],[1,"notification-header"],["color","primary",4,"ngIf"],[1,"notification-time"],["name","time-outline"],[1,"notification-message"]],template:function(i,r){i&1&&(e(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),c(3,"Notifications"),a()()(),e(4,"ion-content")(5,"div",1),l(6,$,3,0,"div",2)(7,H,6,0,"div",3)(8,G,10,8,"ion-card",4),a()()),i&2&&(s(6),f("ngIf",r.isLoading),s(),f("ngIf",!r.isLoading&&r.notifications.length===0),s(),f("ngForOf",r.notifications))},dependencies:[N,b,y,w,L,A,F,E,T,U,k,M],styles:[".notifications-content[_ngcontent-%COMP%]{padding:1rem}.loading-message[_ngcontent-%COMP%], .no-notifications[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;color:#ccc;margin-bottom:1rem}.notification-card[_ngcontent-%COMP%]{margin-bottom:.5rem;border-radius:12px;box-shadow:0 2px 8px #0000001a;cursor:pointer;transition:transform .2s ease}.notification-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.notification-card.unread[_ngcontent-%COMP%]{border-left:4px solid #2e7d32;background-color:#f8fff8}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.notification-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8rem;color:#666}.notification-time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.9rem}.notification-message[_ngcontent-%COMP%]{margin:0;line-height:1.4;color:#333}"]});let t=n;return t})();export{ei as NotificationsPage};
