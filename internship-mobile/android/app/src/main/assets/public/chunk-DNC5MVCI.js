import{a as X}from"./chunk-SZDEGLCB.js";import{a as W}from"./chunk-ZI2MEB23.js";import{a as G,l as K,n as Q}from"./chunk-OSMB4DQJ.js";import{I as y,L as O,P as x,R as F,X as T,_ as A,ca as E,da as k,ea as L,fa as V,g as d,ga as D,h as m,ha as N,i as a,j as f,k as w,ka as j,l as C,m as _,ma as B,n as t,na as R,o as i,oa as q,p as g,q as P,r as u,s as M,t as I,ta as z,ua as H,v as n,va as U,w as b,x as S,ya as J}from"./chunk-6NGTZMOM.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function Y(l,p){if(l&1&&(t(0,"ion-card",18)(1,"ion-card-header")(2,"ion-card-title"),n(3),i()(),t(4,"ion-card-content")(5,"p")(6,"strong"),n(7,"Company:"),i(),n(8),i(),t(9,"p")(10,"strong"),n(11,"Location:"),i(),n(12),i()()()),l&2){let v=M();a(3),b(v.internship.title),a(5),S(" ",v.internship.name),a(4),S(" ",v.internship.location)}}function Z(l,p){l&1&&(t(0,"span"),n(1,"Submit Application"),i())}function $(l,p){l&1&&(t(0,"span"),n(1,"Submitting..."),i())}var de=(()=>{let p=class p{constructor(o,r,e,c){this.route=o,this.router=r,this.authService=e,this.applicationService=c,this.internship=null,this.isLoading=!1,this.showToast=!1,this.toastMessage="",this.toastColor="success",this.cvFile=null,this.transcriptFile=null,this.applicationLetterFile=null,G({documentOutline:Q,cloudUploadOutline:K})}ngOnInit(){let o=this.route.snapshot.queryParams.data;o&&(this.internship=JSON.parse(o))}onFileSelected(o,r){let e=o.target.files[0];if(e)switch(r){case"cv":this.cvFile=e;break;case"transcript":this.transcriptFile=e;break;case"applicationLetter":this.applicationLetterFile=e;break}}submitApplication(){if(!this.cvFile||!this.transcriptFile||!this.applicationLetterFile){this.showToastMessage("Please upload all required documents","warning");return}this.isLoading=!0;let o=new FormData,r=this.authService.getCurrentUser();o.append("internship_id",this.internship.id),o.append("student_id",r.student_id||r.id),o.append("cv",this.cvFile),o.append("transcript",this.transcriptFile),o.append("letter",this.applicationLetterFile),this.applicationService.submitApplication(o).subscribe({next:e=>{this.isLoading=!1,e.success?(this.showToastMessage("Application submitted successfully!","success"),setTimeout(()=>{this.router.navigate(["/tabs/applications"])},2e3)):this.showToastMessage(e.message||"Application failed","danger")},error:e=>{this.isLoading=!1,console.error("Application error:",e),this.showToastMessage("Network error. Please try again.","danger")}})}showToastMessage(o,r){this.toastMessage=o,this.toastColor=r,this.showToast=!0}};p.\u0275fac=function(r){return new(r||p)(f(x),f(F),f(W),f(X))},p.\u0275cmp=w({type:p,selectors:[["app-apply"]],decls:58,vars:11,consts:[["cvInput",""],["transcriptInput",""],["letterInput",""],["color","primary"],["slot","start"],["defaultHref","/internship-details"],[1,"apply-content"],["class","internship-info",4,"ngIf"],[1,"upload-card"],[1,"upload-section"],["name","document-outline","slot","start"],["type","file","accept",".pdf,.doc,.docx",1,"file-input",3,"change"],["fill","outline","size","small",3,"click"],["name","cloud-upload-outline","slot","start"],[1,"submit-section"],["expand","block","size","large","color","primary",3,"click","disabled"],[4,"ngIf"],[3,"didDismiss","isOpen","message","duration","color"],[1,"internship-info"]],template:function(r,e){if(r&1){let c=P();t(0,"ion-header")(1,"ion-toolbar",3)(2,"ion-buttons",4),g(3,"ion-back-button",5),i(),t(4,"ion-title"),n(5,"Apply for Internship"),i()()(),t(6,"ion-content")(7,"div",6),C(8,Y,13,3,"ion-card",7),t(9,"ion-card",8)(10,"ion-card-header")(11,"ion-card-title"),n(12,"Required Documents"),i()(),t(13,"ion-card-content")(14,"div",9)(15,"ion-item"),g(16,"ion-icon",10),t(17,"ion-label")(18,"h3"),n(19,"CV/Resume *"),i(),t(20,"p"),n(21),i()()(),t(22,"input",11,0),u("change",function(s){return d(c),m(e.onFileSelected(s,"cv"))}),i(),t(24,"ion-button",12),u("click",function(){d(c);let s=I(23);return m(s.click())}),g(25,"ion-icon",13),n(26," Choose File "),i()(),t(27,"div",9)(28,"ion-item"),g(29,"ion-icon",10),t(30,"ion-label")(31,"h3"),n(32,"Academic Transcript *"),i(),t(33,"p"),n(34),i()()(),t(35,"input",11,1),u("change",function(s){return d(c),m(e.onFileSelected(s,"transcript"))}),i(),t(37,"ion-button",12),u("click",function(){d(c);let s=I(36);return m(s.click())}),g(38,"ion-icon",13),n(39," Choose File "),i()(),t(40,"div",9)(41,"ion-item"),g(42,"ion-icon",10),t(43,"ion-label")(44,"h3"),n(45,"Application Letter *"),i(),t(46,"p"),n(47),i()()(),t(48,"input",11,2),u("change",function(s){return d(c),m(e.onFileSelected(s,"applicationLetter"))}),i(),t(50,"ion-button",12),u("click",function(){d(c);let s=I(49);return m(s.click())}),g(51,"ion-icon",13),n(52," Choose File "),i()()()(),t(53,"div",14)(54,"ion-button",15),u("click",function(){return d(c),m(e.submitApplication())}),C(55,Z,2,0,"span",16)(56,$,2,0,"span",16),i()()(),t(57,"ion-toast",17),u("didDismiss",function(){return d(c),m(e.showToast=!1)}),i()()}r&2&&(a(8),_("ngIf",e.internship),a(13),b(e.cvFile?e.cvFile.name:"No file selected"),a(13),b(e.transcriptFile?e.transcriptFile.name:"No file selected"),a(13),b(e.applicationLetterFile?e.applicationLetterFile.name:"No file selected"),a(7),_("disabled",e.isLoading),a(),_("ngIf",!e.isLoading),a(),_("ngIf",e.isLoading),a(),_("isOpen",e.showToast)("message",e.toastMessage)("duration",3e3)("color",e.toastColor))},dependencies:[O,y,T,B,U,z,j,L,D,N,V,E,J,A,k,R,q,H],styles:[".apply-content[_ngcontent-%COMP%]{padding:1rem}.internship-info[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.internship-info[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.upload-card[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.upload-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.upload-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #e0e0e0}.upload-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.upload-section[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;margin-bottom:.5rem}.upload-section[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2e7d32}.upload-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#333;margin:0}.upload-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:.25rem 0 0;font-size:.9rem}.file-input[_ngcontent-%COMP%]{display:none}.upload-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;--border-color: #2e7d32;--color: #2e7d32}.submit-section[_ngcontent-%COMP%]{padding:1rem 0;margin-top:1rem}.submit-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;font-weight:600}"]});let l=p;return l})();export{de as ApplyPage};
