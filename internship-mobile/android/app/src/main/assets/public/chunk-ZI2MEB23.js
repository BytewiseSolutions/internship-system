import{N as a,a as c,b as o,c as l,d as u}from"./chunk-6NGTZMOM.js";var d=(()=>{let e=class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8000",this.currentUserSubject=new c(null),this.currentUser$=this.currentUserSubject.asObservable(),this.loadStoredUser()}login(t,r){let s={email:t,password:r};return this.http.post(`${this.apiUrl}/login.php`,s).pipe(o(n=>{n.message==="Login successful"&&this.setCurrentUser(n)}))}register(t){let r={name:t.name,email:t.email,password:t.password,school_id:t.school_id,course_id:t.course_id};return this.http.post(`${this.apiUrl}/register.php`,r)}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}setCurrentUser(t){localStorage.setItem("currentUser",JSON.stringify(t)),this.currentUserSubject.next(t)}loadStoredUser(){let t=localStorage.getItem("currentUser");t&&this.currentUserSubject.next(JSON.parse(t))}isLoggedIn(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}updateProfile(t){return this.http.put(`${this.apiUrl}/update_profile.php`,t).pipe(o(r=>{if(r.success){let s=this.getCurrentUser();s&&(s.name=t.name,s.email=t.email,this.setCurrentUser(s))}}))}};e.\u0275fac=function(r){return new(r||e)(u(a))},e.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{d as a};
