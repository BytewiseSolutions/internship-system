import{a as Y}from"./chunk-ZI2MEB23.js";import{a as J,d as G,t as K,v as Q,y as V,z as X}from"./chunk-OSMB4DQJ.js";import{A as p,B as u,Ba as q,H as I,I as b,L as T,N as O,R as v,V as k,W as E,X as W,_ as R,c as S,ca as L,d as P,da as F,i as a,j as w,k as y,ka as B,l as M,m as c,ma as N,n as t,na as j,o as s,p as m,qa as D,r as _,ta as A,ua as x,v as g,va as U,x as C,ya as z,z as h,za as H}from"./chunk-6NGTZMOM.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var Z=(()=>{let n=class n{constructor(i){this.http=i,this.apiUrl="http://localhost:8000"}getSchools(){return this.http.get(`${this.apiUrl}/api/schools/get_schools.php`)}getCourses(i){if(!i)throw new Error("School ID is required");return this.http.get(`${this.apiUrl}/api/courses/get_courses.php?school_id=${i}`)}};n.\u0275fac=function(l){return new(l||n)(P(O))},n.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();function te(r,n){if(r&1&&(t(0,"ion-select-option",24),g(1),s()),r&2){let f=n.$implicit;c("value",f.school_id),a(),C(" ",f.name," ")}}function ie(r,n){if(r&1&&(t(0,"ion-select-option",24),g(1),s()),r&2){let f=n.$implicit;c("value",f.course_id),a(),C(" ",f.course_name," ")}}function oe(r,n){r&1&&(t(0,"span"),g(1,"Create Account"),s())}function ne(r,n){r&1&&(t(0,"span"),g(1,"Creating Account..."),s())}var fe=(()=>{let n=class n{constructor(i,l,e){this.router=i,this.authService=l,this.dataService=e,this.name="",this.email="",this.password="",this.confirmPassword="",this.schoolId=null,this.courseId=null,this.isLoading=!1,this.showToast=!1,this.toastMessage="",this.toastColor="danger",this.schools=[],this.courses=[],J({personOutline:V,mailOutline:Q,lockClosedOutline:K,schoolOutline:X,bookOutline:G})}ngOnInit(){this.loadSchools()}loadSchools(){this.dataService.getSchools().subscribe({next:i=>{i.success?this.schools=i.schools:this.showToastMessage("Failed to load schools","danger")},error:i=>{console.error("Error loading schools:",i),this.showToastMessage("Network error loading schools","danger")}})}onSchoolChange(){this.schoolId?(this.courseId=null,this.courses=[],this.dataService.getCourses(this.schoolId).subscribe({next:i=>{i.success?this.courses=i.courses:this.showToastMessage("Failed to load courses","danger")},error:i=>{console.error("Error loading courses:",i),this.showToastMessage("Network error loading courses","danger")}})):(this.courses=[],this.courseId=null)}register(){if(!this.name||!this.email||!this.password||!this.confirmPassword||!this.schoolId||!this.courseId){this.showToastMessage("Please fill in all fields","warning");return}if(this.password!==this.confirmPassword){this.showToastMessage("Passwords do not match","warning");return}if(this.password.length<6){this.showToastMessage("Password must be at least 6 characters","warning");return}this.isLoading=!0;let i={name:this.name,email:this.email,password:this.password,school_id:this.schoolId,course_id:this.courseId};this.authService.register(i).subscribe({next:l=>{this.isLoading=!1,l.success?(this.showToastMessage("Registration successful! Please login.","success"),setTimeout(()=>{this.router.navigate(["/login"])},1500)):this.showToastMessage(l.message||"Registration failed","danger")},error:l=>{this.isLoading=!1,this.showToastMessage("Network error. Please try again.","danger")}})}goToLogin(){this.router.navigate(["/login"])}showToastMessage(i,l){this.toastMessage=i,this.toastColor=l,this.showToast=!0}};n.\u0275fac=function(l){return new(l||n)(w(v),w(Y),w(Z))},n.\u0275cmp=y({type:n,selectors:[["app-register"]],decls:42,vars:16,consts:[["color","primary"],["slot","start"],["defaultHref","/landing"],[1,"register-content"],[1,"register-container"],[1,"register-form"],[1,"input-item"],["name","person-outline","slot","start"],["type","text","placeholder","Full Name","fill","outline",3,"ngModelChange","ngModel"],["name","mail-outline","slot","start"],["type","email","placeholder","Email","fill","outline",3,"ngModelChange","ngModel"],["name","school-outline","slot","start"],["label","School","label-placement","floating","placeholder","Select School","fill","outline",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","book-outline","slot","start"],["label","Course","label-placement","floating","placeholder","Select Course","fill","outline",3,"ngModelChange","ngModel","disabled"],["name","lock-closed-outline","slot","start"],["type","password","placeholder","Password","fill","outline",3,"ngModelChange","ngModel"],["type","password","placeholder","Confirm Password","fill","outline",3,"ngModelChange","ngModel"],["expand","block","size","large",1,"register-button",3,"click","disabled"],[4,"ngIf"],[1,"login-link"],[1,"link",3,"click"],[3,"didDismiss","isOpen","message","duration","color"],[3,"value"]],template:function(l,e){l&1&&(t(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),m(3,"ion-back-button",2),s(),t(4,"ion-title"),g(5,"Create Account"),s()()(),t(6,"ion-content",3)(7,"div",4)(8,"div",5)(9,"h1"),g(10,"Join Us"),s(),t(11,"p"),g(12,"Create your student account to start finding internships"),s(),t(13,"ion-item",6),m(14,"ion-icon",7),t(15,"ion-input",8),u("ngModelChange",function(o){return p(e.name,o)||(e.name=o),o}),s()(),t(16,"ion-item",6),m(17,"ion-icon",9),t(18,"ion-input",10),u("ngModelChange",function(o){return p(e.email,o)||(e.email=o),o}),s()(),t(19,"ion-item",6),m(20,"ion-icon",11),t(21,"ion-select",12),u("ngModelChange",function(o){return p(e.schoolId,o)||(e.schoolId=o),o}),_("ionChange",function(){return e.onSchoolChange()}),M(22,te,2,2,"ion-select-option",13),s()(),t(23,"ion-item",6),m(24,"ion-icon",14),t(25,"ion-select",15),u("ngModelChange",function(o){return p(e.courseId,o)||(e.courseId=o),o}),M(26,ie,2,2,"ion-select-option",13),s()(),t(27,"ion-item",6),m(28,"ion-icon",16),t(29,"ion-input",17),u("ngModelChange",function(o){return p(e.password,o)||(e.password=o),o}),s()(),t(30,"ion-item",6),m(31,"ion-icon",16),t(32,"ion-input",18),u("ngModelChange",function(o){return p(e.confirmPassword,o)||(e.confirmPassword=o),o}),s()(),t(33,"ion-button",19),_("click",function(){return e.register()}),M(34,oe,2,0,"span",20)(35,ne,2,0,"span",20),s(),t(36,"div",21)(37,"p"),g(38,"Already have an account? "),t(39,"span",22),_("click",function(){return e.goToLogin()}),g(40,"Sign in"),s()()()()(),t(41,"ion-toast",23),_("didDismiss",function(){return e.showToast=!1}),s()()),l&2&&(a(15),h("ngModel",e.name),a(3),h("ngModel",e.email),a(3),h("ngModel",e.schoolId),a(),c("ngForOf",e.schools),a(3),h("ngModel",e.courseId),c("disabled",!e.schoolId),a(),c("ngForOf",e.courses),a(3),h("ngModel",e.password),a(3),h("ngModel",e.confirmPassword),a(),c("disabled",e.isLoading),a(),c("ngIf",!e.isLoading),a(),c("ngIf",e.isLoading),a(6),c("isOpen",e.showToast)("message",e.toastMessage)("duration",3e3)("color",e.toastColor))},dependencies:[T,I,b,B,N,U,A,L,H,j,z,R,F,x,q,D,W,k,E],styles:[".register-content[_ngcontent-%COMP%]{--background: #f5f5f5}.register-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100%;padding:2rem 1rem}.register-form[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;width:100%;max-width:400px;box-shadow:0 4px 12px #0000001a}.register-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#2e7d32;font-size:1.8rem;font-weight:600;margin-bottom:.5rem}.register-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:2rem}.input-item[_ngcontent-%COMP%]{margin-bottom:1rem;--border-radius: 12px;--background: #f8f9fa}.input-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2e7d32;margin-right:12px}.register-button[_ngcontent-%COMP%]{--background: #2e7d32;--color: #ffffff;--border-radius: 12px;margin-top:1rem;font-weight:600;height:48px}.register-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:1rem}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.link[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600;cursor:pointer}"]});let r=n;return r})();export{fe as RegisterPage};
